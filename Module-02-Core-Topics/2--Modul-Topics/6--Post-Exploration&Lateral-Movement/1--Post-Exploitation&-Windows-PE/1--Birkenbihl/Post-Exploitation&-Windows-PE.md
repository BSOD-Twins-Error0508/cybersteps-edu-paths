Welcome to the exciting world of post-exploitation.
Willkommen in der spannenden Welt der Post-Exploitation.

In previous lessons, you learned how to gain initial access to a machine.
In vorherigen Lektionen haben Sie gelernt, wie man anfänglichen Zugriff auf eine Maschine erhält.

But as a cybersecurity professional, getting that first shell is just the beginning of the journey.
Aber als Cybersicherheitsprofi ist das Erhalten der ersten Shell nur der Anfang der Reise.

The real work starts after you are in.
Die eigentliche Arbeit beginnt, nachdem Sie drin sind.

This week, we will focus on what to do next, specifically how to elevate our privileges on a Windows system.
Diese Woche konzentrieren wir uns darauf, was als Nächstes zu tun ist, insbesondere wie wir unsere Privilegien auf einem Windows-System erhöhen.

After the Shell: The Three Goals
Nach der Shell: Die drei Ziele

Once an attacker gains an initial foothold on a system, they typically have three main objectives.
Sobald ein Angreifer einen anfänglichen Fußhalt auf einem System erlangt hat, hat er typischerweise drei Hauptziele.

Understanding these goals is key to both offensive and defensive security.
Das Verständnis dieser Ziele ist entscheidend für offensive und defensive Sicherheit.

1. Persistence.
2. Persistenz.

The first challenge is staying on the computer.
Die erste Herausforderung besteht darin, auf dem Computer zu bleiben.

A simple reboot or a user logging out could terminate your shell.
Ein einfacher Neustart oder das Abmelden eines Benutzers könnte Ihre Shell beenden.

Persistence is the set of techniques used to ensure your access survives these events.
Persistenz ist der Satz von Techniken, die verwendet werden, um sicherzustellen, dass Ihr Zugriff diese Ereignisse überlebt.

This often involves creating a mechanism, like a scheduled task or a registry key, that automatically runs your code when the machine starts up or a user logs in.
Das beinhaltet oft die Erstellung eines Mechanismus, wie einer geplanten Aufgabe oder eines Registry-Schlüssels, der Ihren Code automatisch ausführt, wenn die Maschine hochfährt oder ein Benutzer sich anmeldet.

2. Privilege Escalation.
3. Privilege Escalation.

Most of the time, the shell you gain will be running as a normal, low-privileged user.
Meistens läuft die Shell, die Sie erhalten, als normaler, niedrig privilegierter Benutzer.

This user will not have permission to access sensitive files, install software, or change critical system settings.
Dieser Benutzer hat keine Berechtigung, sensible Dateien zu zugreifen, Software zu installieren oder kritische Systemeinstellungen zu ändern.

Privilege Escalation, often shortened to PrivEsc, is the process of exploiting a vulnerability, misconfiguration, or weakness in the operating system to gain a higher level of access, moving from a normal user to an administrator or even the all-powerful SYSTEM account.
Privilege Escalation, oft abgekürzt als PrivEsc, ist der Prozess, eine Schwachstelle, Fehlkonfiguration oder Schwäche im Betriebssystem auszunutzen, um einen höheren Zugriffslevel zu erlangen, von einem normalen Benutzer zu einem Administrator oder sogar zum allmächtigen SYSTEM-Konto.

This is our main focus for this lesson.
Das ist unser Hauptfokus für diese Lektion.

3. Lateral Movement.
4. Lateral Movement.

Gaining full control of one computer is good, but in a corporate network, the goal is often to access other machines.
Die volle Kontrolle über einen Computer zu erlangen ist gut, aber in einem Unternehmensnetzwerk ist das Ziel oft, auf andere Maschinen zuzugreifen.

Lateral Movement is the technique of using your initial foothold as a stepping stone to pivot and access other computers on the same network.
Lateral Movement ist die Technik, Ihren anfänglichen Fußhalt als Sprungbrett zu nutzen, um zu pivotieren und auf andere Computer im selben Netzwerk zuzugreifen.

By moving from machine to machine, an attacker can search for more valuable data or gain access to more critical systems, like a Domain Controller.
Indem ein Angreifer von Maschine zu Maschine wechselt, kann er nach wertvolleren Daten suchen oder Zugang zu kritischeren Systemen erlangen, wie einem Domain Controller.

Understanding Windows Access Control
Windows-Zugriffssteuerung verstehen

To understand how to escalate privileges, you first need to understand how Windows controls access.
Um zu verstehen, wie man Privilegien eskaliert, müssen Sie zuerst verstehen, wie Windows den Zugriff steuert.

Windows does not make decisions based on usernames; it uses a more robust and permanent system under the hood.
Windows trifft keine Entscheidungen basierend auf Benutzernamen; es verwendet ein robustes und permanentes System im Hintergrund.

Users and SIDs.
Benutzer und SIDs.

When you create a user account like bill, Windows also generates a unique, permanent identifier for that account called a Security Identifier, SID.
Wenn Sie ein Benutzerkonto wie bill erstellen, generiert Windows auch einen einzigartigen, permanenten Identifier für dieses Konto, genannt Security Identifier, SID.

A SID looks something like this: S-1-5-21-12345678-98765432-1001.
Ein SID sieht etwa so aus: S-1-5-21-12345678-98765432-1001.

Think of the username bill as a nickname.
Stellen Sie sich den Benutzernamen bill als Spitznamen vor.

The SID is the user's true, unchangeable name.
Der SID ist der wahre, unveränderliche Name des Benutzers.

If you rename the user bill to steve, the SID stays exactly the same.
Wenn Sie den Benutzer bill in steve umbenennen, bleibt der SID genau gleich.

This is crucial because all permissions are tied to the SID, not the username.
Das ist entscheidend, weil alle Berechtigungen an den SID gebunden sind, nicht an den Benutzernamen.

Permissions, ACLs, and ACEs.
Berechtigungen, ACLs und ACEs.

How does Windows know who can do what?
Wie weiß Windows, wer was tun darf?

Every object in Windows, like a file, folder, or registry key, has an Access Control List, ACL.
Jedes Objekt in Windows, wie eine Datei, ein Ordner oder ein Registry-Schlüssel, hat eine Access Control List, ACL.

An ACL is simply a list of rules.
Eine ACL ist einfach eine Liste von Regeln.

Each rule in that list is called an Access Control Entry, ACE.
Jede Regel in dieser Liste wird Access Control Entry, ACE, genannt.

An ACE is a single permission that connects three things:
Ein ACE ist eine einzelne Berechtigung, die drei Dinge verbindet:

1. A SID, who the rule applies to.
2. Ein SID, auf wen die Regel anwendbar ist.

3. An Action, like Read, Write, or Full Control.
4. Eine Aktion, wie Lesen, Schreiben oder Full Control.

5. An Effect, Allow or Deny.
6. Ein Effekt, Allow oder Deny.

So, a simple ACE might say: The SID S-1-...-1001 is Allowed to Read this file.
Also könnte ein einfaches ACE sagen: Der SID S-1-...-1001 ist erlaubt, diese Datei zu lesen.

All the ACEs for a file are stored in its ACL.
Alle ACEs für eine Datei werden in ihrer ACL gespeichert.

Tokens.
Tokens.

When you log in, Windows creates a special object for you called an Access Token.
Wenn Sie sich anmelden, erstellt Windows ein spezielles Objekt für Sie, genannt Access Token.

This token is your digital ID card for that session.
Dieses Token ist Ihre digitale ID-Karte für diese Sitzung.

It contains your SID, the SIDs of all the groups you belong to, like Administrators or Users, and your privilege level.
Es enthält Ihren SID, die SIDs aller Gruppen, zu denen Sie gehören, wie Administrators oder Users, und Ihren Privilegienlevel.

Every single program you run inherits a copy of your token.
Jedes einzelne Programm, das Sie ausführen, erbt eine Kopie Ihres Tokens.

When you try to open a file, Windows compares the SIDs in your token against the ACEs in the file's ACL to decide if you have access.
Wenn Sie versuchen, eine Datei zu öffnen, vergleicht Windows die SIDs in Ihrem Token mit den ACEs in der ACL der Datei, um zu entscheiden, ob Sie Zugriff haben.

The Goal: From User to SYSTEM
Das Ziel: Von User zu SYSTEM

Privilege escalation is about forcing the system to give your process a token with more power.
Privilege Escalation geht darum, das System zu zwingen, Ihrem Prozess ein Token mit mehr Macht zu geben.

In Windows, there are three main levels of privilege we care about:
In Windows gibt es drei Hauptlevel von Privilegien, die uns interessieren:

1. Standard User, Medium Integrity.
2. Standard User, Medium Integrity.

This is the account type you will most often land on after an exploit.
Das ist der Kontotyp, auf dem Sie meistens nach einem Exploit landen.

It can run programs and access the user's own files, but it cannot modify system files or change critical settings.
Es kann Programme ausführen und auf die eigenen Dateien des Benutzers zugreifen, aber es kann keine Systemdateien modifizieren oder kritische Einstellungen ändern.

2. Administrator, High Integrity.
3. Administrator, High Integrity.

An administrator account can install software, modify most system settings, and access almost any file on the system.
Ein Administratorkonto kann Software installieren, die meisten Systemeinstellungen modifizieren und auf fast jede Datei im System zugreifen.

Gaining administrator access is a major step in taking full control of a machine.
Den Administratorzugriff zu erlangen ist ein großer Schritt, um die volle Kontrolle über eine Maschine zu übernehmen.

3. NT AUTHORITY SYSTEM, System Integrity.
4. NT AUTHORITY SYSTEM, System Integrity.

This is the ultimate prize on a local Windows machine.
Das ist der ultimative Preis auf einer lokalen Windows-Maschine.

The SYSTEM account is even more powerful than an Administrator.
Das SYSTEM-Konto ist sogar mächtiger als ein Administrator.

It is the account that the operating system itself uses to manage core functions.
Es ist das Konto, das das Betriebssystem selbst verwendet, um Kernfunktionen zu verwalten.

Many critical background processes, known as Windows Services, run as SYSTEM.
Viele kritische Hintergrundprozesse, bekannt als Windows Services, laufen als SYSTEM.

If you can get your code to run as SYSTEM, you have complete and unrestricted control over the computer.
Wenn Sie Ihren Code als SYSTEM ausführen können, haben Sie vollständige und uneingeschränkte Kontrolle über den Computer.

Our goal in this lesson is to learn the techniques that allow us to climb this ladder of privilege, moving from a standard user all the way up to SYSTEM.
Unser Ziel in dieser Lektion ist es, die Techniken zu lernen, die uns erlauben, diese Leiter der Privilegien zu erklimmen, von einem Standardbenutzer bis ganz nach oben zu SYSTEM.

A great resource on windows local privilege escalation: https://book.hacktricks.wiki/en/windows-hardening/checklist-windows-privilege-escalation.html
Eine großartige Ressource zu Windows lokaler Privilege Escalation: https://book.hacktricks.wiki/en/windows-hardening/checklist-windows-privilege-escalation.html

We will explore some of those techniques in the session.
Wir werden einige dieser Techniken in der Sitzung erkunden.